var Math_utils = require('util/math');

var MOLA = require('mola');

module.exports = {
    _tile_lat: function(j){
        var progress = Math_utils.clamp(j / this.get_tile_cols(), 0, 1)
        var lat_width = this.east - this.west;
        return  Math_utils.clamp((progress * lat_width) + this.west, this.west, this.east);
    },
    
    _tile_long: function(i){
        var progress = Math_utils.clamp(i / this.get_tile_rows(), 0, 1);
        var long_width = this.north - this.south;
        return Math_utils.clamp((progress * long_width) + this.south, this.south, this.north);
    },

    load: function() {
        console.log(__filename, ':: load() starting');
        if (!(MOLA.extensions.hasOwnProperty('tile_lat_long') && MOLA.extensions.chop_data)){
            
            for (var prop in module.exports){
                if (prop != 'load'){
                    MOLA.prototype[prop] = module.exports[prop];
                }
            }
            
            MOLA.extensions.chop_data = true;
            
            console.log(__filename, ' LOADED');
        }
    }

}