module.exports = function(data, callback, filter, options) {
    
    if (this.config.coll) {
        if (!filter) {
            if (data._id) {
                filter = {
                    _id: data._id
                };
            } else {
                callback(new Error('attempt to update with no filter'));
            }
        }
        
        var upsert = false;
        var multi = false;
        
        if (options){
            for (var p in options){
                p = p.toLowerCase();
                switch (p){
                    case 'upsert':
                        upsert = options[p];
                        break;
                    
                    case 'multi':
                        multi = options[p];
                        break;
                }
            }
        }
        
        console.log(__filename, ': updating ', filter, ' with ', data, '; callback = ', callback);
        
        this.config.coll.update(filter, data, upsert, multi, callback);
    } else {
        callback(new Error('No Connection'));
    }
}