module.exports = function(Context, gate) {

    Context._action_registry = {};
    Context.register_action = function(c, a) {
        if (!Context._action_registry.hasOwnProperty(c)) {
            Context._action_registry[c] = [a];
        } else {
            Context._action_registry[c].push(a);
            Context._action_registry[c] = _.uniq(Context._action_registry[c]);
        }
    }

    Context.registered_actions = function(c) {
        if (c) {
            return Context._action_registry[c];
        } else {
            return _.uniq(_.flatten(Context._action_registry));
        }
    }

    Context.all_registered_actions = function() {
        return Context._action_registry;
    }

    gate.task_done();
}