/**
 *
 * This is a method of grid to get or set a point's parameters.
 * 
 * The Get or Set point
 * possible arguments:
 * 
 *   grid.p(2,3)
 *   gird.p(2,3, {block: true});
 *   grid.p({i: 2, j: 3})
 *   grid.p([2, 3])
 *   grid.p([2,3], {block:true});
 * 
 */

module.exports = function(i, j, v) {
    if (typeof i == 'object') {
        v = j;
        if (i.hasOwnProperty('length')) {
            j = i.shift();
            i = i.shift();
        } else {
            j = i.j;
            i = i.i;
        }
    }

    if (!this.on_map(i,j)) {
        this.oor(i, j);
    }
    
    var key = i + '.' + j;
    var p = this.points[key];

    if (v) { // set
        _.defaults(v, p)
        // supplement v with any pre-existing values of old point that are not set by v
        this.points[key] = v;
        return v;
    } else { // get
        return p;
    }
}
