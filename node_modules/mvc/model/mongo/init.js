module.exports = function(model_module, callback) {
    var self = this;
    
  //  console.log('initializing ', model_module);
    if (model_module.hasOwnProperty(config)) {
        var config = model_module.config;
    } else {
        var config = {};
    }

    if (model_module.hasOwnProperty('mixins')) {
        var mixins = model_module.mixins;
          //  console.log ('mixins for ', model_module.collection);
       // for (var p in mixins){
          //  console.log(p);
      //  }
    } else {
          //  console.log ('NO mixins for ', model_module.collection);
        var mixins = {};
    }

    if (model_module.hasOwnProperty('name')) {
        var name = model_module.name;
    } else if (model_module.hasOwnProperty('collection')) {
        var name = model_module.collection;
    };

    if (!name) {
        callback(new Error('cannot find model name.'));
    } else {
    //    console.log(__filename, ':: init: mixins for ', name, ', mixins: ', mixins);
        
        function _mixins_made(err, model) {
            if (err) {
                console.log(__filename, ': error making model: ', err);
                callback(err);
            } else {
                model_module._model = model;
                if (model.on_load) {
                    console.log('initializing model ', name, ' on_load', model.on_load);
                    model.on_load(model, callback);
                } else {
                    console.log('NOT initializing model ', name, ' on_load');
                    callback(null, model);
                }
            }
        }
        
        self.make_model(name, config, mixins, _mixins_made);
    }
}