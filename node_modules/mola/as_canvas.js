var Canvas = require('canvas');

module.exports = function() {
    var self = this;

    var canvas = new Canvas(this.get_cols(), this.get_rows());
    console.log('NEW CANVAS SIZE', canvas.width, canvas.height);
    var ctx = canvas.getContext('2d');
    var id = ctx.createImageData(canvas.width, canvas.height);
    
    var base = 0;
    this.data.forEach(function(height) {
        var rgb = self.height_color(height);

        id.data[base] = rgb[0];
        id.data[base + 1] = rgb[1];
        id.data[base + 2] = rgb[2];
        id.data[base + 3] = 255;

        base += 4;
        // oninc(base, 1000000, _c);
    });

    ctx.putImageData(id, 0, 0);
    console.log('done drawing image data');
    return canvas;
}