var mu = require('util/math');
var util = require('util');

module.exports = function(data, row, col, height, width){
 //   console.log('data: ', util.inspect(data));
 //   console.log('row:', row, 'col:', col, 'h', height, 'w', width);
    var out = [];

    var row_start = mu.clamp(row, 0, data.length, true);
    var row_end   = mu.clamp(row + height, 0, data.length, true);

    var col_start = mu.clamp(col, 0, data[0].length, true);
    var col_end   = mu.clamp(col + width, 0, data[0].length, true);

    for (var r = row_start; r < row_end; ++r){
            out.push(data[r].slice(col_start, col_end));
    }

    return {
        data: out,
        row_start: row_start,
        row_end: row_end,
        col_start: col_start,
        col_end: col_end,
        rows: row_end - row_start,
        cols: col_end - col_start
    }
}