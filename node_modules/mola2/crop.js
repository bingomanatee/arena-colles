module.exports = function(image_data, clip) {
     console.log('original size: ', degm(image_data.length), 'rows x', degm(image_data[0].length), 'cols')

    if (clip.bottom < 0) {
         console.log('bottom_cti = ', degm(clip.bottom, zoom), '; cropping bottom from ', degm(image_data.length, zoom), '...');
        image_data = image_data.slice(0, image_data.length + clip.bottom);
         console.log('... to ', degm(image_data.length, clip.zoom));
    }

    if (clip.top > 0) {
         console.log('top_cti = ', degm(clip.top), '; cropping top from ', degm(image_data.length), '...');
        image_data = image_data.slice(clip.top);
         console.log('... to ', degm(image_data.length, clip.zoom));
    }

    image_data.forEach(function(row, i) {

        if (clip.right > 0) {
            row = row.slice(0, row.length - clip.right);
            if (i == 0) {
                 console.log('...to', degm(row.length, zoom));
            }
        }

        if (clip.left < 0) {
            row = row.slice(-1 * clip.left);
        }

        image_data[i] = row;
    })

    return image_data;
}

function degm(n, zoom) {
    var nd = zoom ? zoom * n : n
    return n + '(' + nd / 128 + ' deg)';
}