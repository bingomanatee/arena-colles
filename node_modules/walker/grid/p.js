/**
 * The Get or Set point
 * possible arguments:
 * 
 *   grid.p(2,3)
 *   gird.p(2,3, {block: true});
 *   grid.p({i: 2, j: 3})
 *   grid.p([2, 3])
 *   grid.p([2,3], {block:true});
 * 
 */

module.exports = function(i, j, v) {
    if (typeof i == 'object') {
        v = j;
        var ii = i;
        if (i.hasOwnProperty('length')) {
            ii = i.shift();
            j = i.shift();
        } else {
            i = ii.i;
            j = ii.j;
        }
    }

    if ((i >= this.i || j >= this.j) || (i < 0 || j < 0)) this.oor(i, j);
    // note- not using on_map for efficiencies' sake. 
    var key = i + '.' + j;
    var p = this.points[key];

    if (v) { // set
        _.defaults(v, p)
        // supplement v with any pre-existing values of old point that are not set by v
        this.points[key] = v;
        return v;
    } else { // get
        return p;
    }
}