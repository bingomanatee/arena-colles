var util = require('util');
var _ = require('underscore');

function Cell_Data(parent, row, col, height) {
    this.parent = this.terrain = parent;
    this.row = row;
    this.col = col;
    this.height = height ? height : 0;
    this.start_height = this.height;
    this.water = 0;
    this.mud = 0;
    this.change_in_mud = 0;
    this.flux = {};
    this.neighbors = {};
    this.sed_trans_cap = 0;

}

Cell_Data.prototype = {
    each_neighbor:function (do_f) {
        for (var dir in this.neighbors) {
            var neighbor = this.neighbors[dir];
            do_f(this, neighbor, dir);
        }
    },

    water_height:function () {
        return this.height + this.water;
    },

    land_height: function(){
       // console.log('mud: %s, height: %s', this.mud, this.height);
        return Math.round(this.mud + this.height);
    }
}

module.exports = Cell_Data;